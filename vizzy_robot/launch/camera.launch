<?xml version="1.0"?>
<launch>
  <arg name="camera" default="left_camera" />
  <arg name="guid" default="" />
  <arg name="video_mode" default="640x480_rgb8" />
  <arg name="frame_rate" default="5" />
  <arg name="throttle_rate" default="1" />
  <!-- nodelet manager process -->
  <node pkg="nodelet" type="nodelet" name="$(arg camera)_camera_nodelet_manager" args="manager" />

  <!-- camera driver nodelet -->
  <node pkg="nodelet" type="nodelet" name="$(arg camera)_nodelet" args="load camera1394/driver $(arg camera)_camera_nodelet_manager" >
	<param name="guid" value="$(arg guid)" />
	<param name="video_mode" value="$(arg video_mode)"/>
	<param name="frame_rate" value="5"/>
    	<remap from="camera" to="$(arg camera)" />
  </node>
    
  <!-- Bayer color decoding -->
  <node pkg="nodelet" type="nodelet" name="$(arg camera)_image_proc_debayer" args="load image_proc/debayer $(arg camera)_camera_nodelet_manager">
    <remap from="image_color" to="$(arg camera)/image_color" />
    <remap from="image_mono" to="$(arg camera)/image_mono" />
    <remap from="image_raw" to="$(arg camera)/image_raw" />
  </node>

  <!-- mono rectification -->
  <node pkg="nodelet" type="nodelet" name="$(arg camera)_image_proc_rect" args="load image_proc/rectify $(arg camera)_camera_nodelet_manager">
    <remap from="image_mono" to="$(arg camera)/image_mono" />
    <remap from="image_rect" to="$(arg camera)/image_rect" />
  </node>

  <!-- color rectification -->
  <node pkg="nodelet" type="nodelet" name="$(arg camera)_image_proc_rect_color" args="load image_proc/rectify $(arg camera)_camera_nodelet_manager">
    <remap from="image_mono" to="$(arg camera)/image_color" />
    <remap from="image_rect" to="$(arg camera)/image_rect_color" />
  </node>

  <node name="$(arg camera)_throttle_node" pkg="topic_tools" type="throttle" args="messages $(arg camera)/image_raw $(arg throttle_rate) $(arg camera)/image_throttled" />
</launch>

